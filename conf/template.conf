default_error_pages ./errors_default;

server {

	listen 8080;
	host 127.0.0.1;
	server_name server1 another.name.fr;
	error_pages /errors/my_custom_errors1/;
	body_max_size 1024;

	location * { # ce loc block est obligatoire
		root ./var/www/server1/; #obligatoire
		methods GET POST DELETE;
		dir_listing off;

		default_uri index.html;
		upload on; //Only for static upload
	};

	location images/* {

		root ./var/www/server1/data/; //override the root above?
		methods GET DELETE;
		dir_listing on;
		upload on;
		#upload_root ./var/www/server1/tmp/;
	};


	location cgi/* {
		root ./var/www/server1/; #obligatoire
		methods GET POST DELETE;
		dir_listing off;

		default_uri index.html;
		upload off; //Only for static upload
	};

	cgi *.php{

		root ./var/www/server1/cgi/php/;
		methods POST GET DELETE;
		exec php;
		identifier .php;
		};
};

server {

	listen 8080;
	host 127.0.0.1;
	server_name server2 another.name.en;
	error_pages ./errors/my_custom_errors1/;
	body_max_size 1024;

	location * { # ce loc block est obligatoire
		root ./var/www/server1/; #obligatoire
		methods GET POST DELETE;
		dir_listing on;

		default_uri index.php;
		upload off;
	};

	location /images/ {

		root ./var/www/server1/data/; //override the root above?
		methods GET POST DELETE;
		dir_listing on;
		default_uri index_images.html; 	//error?;
		upload on;
		upload_root ./var/www/server1/tmp/;
	};

	location ./var/www/server1/cgi/php/ {
		
	};

	cgi /cgi-bin/*.php {

		root ./var/www/server1/;
		methods POST GET;
		exec php;
		identifier .php;
	};

	cgi /dir/pathinfo/script.php {
		root ./var/www/server1/dir/pathinfo/;
	};

};
server {

	listen 8080 8000;
	host 127.0.0.1;
	server_name server3;
	body_max_size 2048;
	error_pages	./errors/my_custom_errors1/;

	location * {
		root /var/www/server1/; #obligatoire
		methods GET POST DELETE;
		dir_listing off;

		default_uri index.html;
		upload off;
	};

	cgi *.py{

		root /var/www/server2/cgi/python;
		methods POST GET;
		exec python;
	};

	location /recipes/ {

		root /var/www/server2/recipes/;
		methods GET;
		dir_listing off;

		default_uri /var/www/server2/recipes/index_recipes.html;
	};

	location /desserts/tarte{
		return      301 http://server1/recipes/$request_uri; //????
	};

};
