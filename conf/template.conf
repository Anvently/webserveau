default_error_pages ./errors_default/;

server {
	listen 8080;
	host 127.0.0.1;
	server_name server1 another.name.fr;
	body_max_size 10000000;

	location * { # ce loc block est obligatoire
		root ./var/www/server1/; #obligatoire
		methods GET POST;
		dir_listing off;

		default_uri index.html;
		upload off; //Only for static upload
	};

	location *.py *.php {
		root ./var/www/server1/cgi/uploaded_scripts/;
		methods GET POST DELETE;
		dir_listing off;
		upload on;
	};

	location errors_default/* {
		root ./; #obligatoire
	};

	location images/* {

		root ./var/www/server1/data/; //override the root above?
		methods POST GET;
		dir_listing on;
		upload on;
		upload_root ./var/www/server1/tmp/;
	};

	location tmp/* tmp* {
		root ./var/www/server1/;
		default_uri index.html;
		methods GET DELETE;
	};

	location data/* {
		root ./var/www/server1/;
		return 300 "http://localhost:8080/tmp/index.html" http://localhost:8080/tmp/images/;
	};

	# location *.py* {
	# 	root ./;
	# 	return 307 http://localhost:8080/sous_dir/;
	# };

	location cgi/* {
		root ./var/www/server1/; #obligatoire
		methods GET POST DELETE;
		dir_listing off;

		default_uri index.html;
		upload off; //Only for static upload
	};

	cgi *.php* {

		root ./var/www/server1/cgi/php/;
		methods POST GET DELETE;
		exec /usr/bin/php;
		identifier .php;
		};

	# cgi sous_dir/*.py* {
	# 	root ./var/www/server1/cgi/py/sous_dir/;
	# 	methods POST GET DELETE;
	# 	exec /usr/bin/python;
	# 	identifier .py;
	# };

	cgi *.py* {
		root ./var/www/server1/cgi/py/;
		methods POST GET DELETE;
		exec /usr/bin/python;
		identifier .py;
	};

	cgi *.out* {
		root ./var/www/server1/cgi/out/;
		methods POST GET DELETE;
		identifier .out;
		exec ./;
	};
};

server {
	listen			8000;
	host			127.0.0.1;
	server_name		server2;
	body_max_size	100;

	location * {
		root		./YoupiBanane/;
		methods		GET;
	};

	location put_test/* {
		root		./YoupiBanane/;
		upload		on;
		upload_root	./YoupiBanane/upload/;
		methods		GET POST;
	};

	location directory/* {
		root		./YoupiBanane/;
		default_uri	./YoupiBanane/youpi.bad_extension;
		methods		GET;
	};

	location *.bla {
		root ./YoupiBanane/;
		methods		GET POST DELETE;
	};

	cgi *.bla* {
		root ./YoupiBanane/;
		methods		GET	POST;
		exec ./tester/cgi_tester;
	};

	# location put_test/*.bla {
	# 	root ./YoupiBanane/;
	# 	methods		GET POST DELETE;
	# };

	# cgi *.bla* {
	# 	root ./YoupiBanane/;
	# 	methods		GET	POST;
	# 	exec ./tester/cgi_tester;
	# };

};

# server {

# 	listen 8080;
# 	host 127.0.0.1;
# 	server_name server2 another.name.en;
# 	error_pages ./errors/my_custom_errors1/;
# 	body_max_size 1024;

# 	location * { # ce loc block est obligatoire
# 		root ./var/www/server1/; #obligatoire
# 		methods GET POST DELETE;
# 		dir_listing on;

# 		default_uri index.php;
# 		upload off;
# 	};

# 	location /images/ {

# 		root ./var/www/server1/data/; //override the root above?
# 		methods GET POST DELETE;
# 		dir_listing on;
# 		default_uri index_images.html; 	//error?;
# 		upload on;
# 		upload_root ./var/www/server1/tmp/;
# 	};

# 	location ./var/www/server1/cgi/php/ {
# 		root ./var/www/server1/cgi/php/;
# 	};

# 	cgi /cgi-bin/*.php {

# 		root ./var/www/server1/;
# 		methods POST GET;
# 		exec php;
# 		identifier .php;
# 	};

# 	cgi /dir/pathinfo/script.php {
# 		root ./var/www/server1/dir/pathinfo/;
# 		identifier .php;
# 	};

# };
# server {

# 	listen 8080 8000;
# 	host 127.0.0.1;
# 	server_name server3;
# 	body_max_size 2048;
# 	error_pages	./errors/my_custom_errors1/;

# 	location * {
# 		root /var/www/server1/; #obligatoire
# 		methods GET POST DELETE;
# 		dir_listing off;

# 		default_uri index.html;
# 		upload off;
# 	};

# 	cgi *.py{

# 		root /var/www/server2/cgi/python;
# 		methods POST GET;
# 		exec python;
# 		identifier .py;
# 	};

# 	location /recipes/ {

# 		root /var/www/server2/recipes/;
# 		methods GET;
# 		dir_listing off;

# 		default_uri /var/www/server2/recipes/index_recipes.html;
# 	};

# 	location /desserts/tarte{
# 		root ./desserts/tarte;
# 		return      301 http://server1/recipes/$request_uri; //????
# 	};

# };
